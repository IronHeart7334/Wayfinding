<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title> Wayfinding </title>
		<base target="_top">
		
		<link rel="stylesheet" href="stylesheet.css">
        
		<script src="./src/svg.js"></script>
		<script src="./src/svg.panzoom.js"></script>
		
		<script>
			function initDrive(){
				gapi.load("client:auth2", ()=>{
					gapi.client.init({
						apiKey: "AIzaSyCk-i3lAc_k5ngfJ-FDw37swWvPMYaEWZs",
						client_id: "123335625420-4t9oodh2j04umpau2m98dd2uvkn6s659.apps.googleusercontent.com",
						discoveryDocs: ["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],
						scope: "https://www.googleapis.com/auth/drive"
					}).then(()=> {
                        /*
                        Since gapi loads asynchronously,
                        whereas index.js is loaded synchronously,
                        and index.js requires gapi to work, gapi must load first.
                        To solve this problem, gapi, upon loading, 
                        inserts the script tag for index.js once it loads.
                        This allows both gapi and modules to coexist with minimal polution of the global namespace.
                         */
                        let script = document.createElement("script");
                        script.type = "module";
                        script.src = "./src/webpages/index.js";
                        document.getElementsByTagName("head")[0].appendChild(script);
					});
				},
                (error)=>{
					console.error(error);
				});
			}
		</script>
		
	</head>
    <body>
        <div id="tools">
            <div>
                <p>Current Path URL</p>
                <p id="currUrl"></p>
            </div>
            <button id="downloadSvg">Download this image</button>
        </div>
        
        <div id="wrapper"></div>
        
		<table id="search">
			<tr>
				<td>Set Path</td>
				<td>Start</td>
				<td>End</td>
			</tr>
			<tr>
				<td>Input</td>
				<td><input type="text" id="start box" style="width : 100%; height: 50%"/></td>
				<td><input type="text" id="end box" style="width : 100%; height: 50%"/></td>
			</tr>
			<tr>
				<td>Closest Match</td>
				<td><div id="start hint" style="width : 100%; height: 50%"></div></td>
				<td><div id="end hint" style="width : 100%; height: 50%"></div></td>
			</tr>
			<tr>
				<td colspan="3">
					<button id="button" style="width: 100%">Draw path</button>
				</td>
			</tr>
		</table>
		<ul id="moreInfo"></ul>
        
		<script async defer src="https://apis.google.com/js/api.js"onload="initDrive()"></script>
		<!--See head for why this is commented out-->
        <!--<script src="./src/webpages/index.js" type="module"></script>-->
    </body>
</html>
