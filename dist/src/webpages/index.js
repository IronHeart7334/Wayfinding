!function(t){var e={};function s(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=6)}([function(t,e,s){"use strict";function n(t){let e=[];try{(Array.isArray(t)?t:t.split(/\r?\n|\r/)).forEach(t=>{e.push(Array.isArray(t)?t:t.split(","))})}catch(e){console.log(e.stack),console.log("response text is: "),console.log(t)}return e}s.d(e,"b",function(){return n}),s.d(e,"a",function(){return o});class o{constructor(t){this.headers=[],this.data=n(t),this.headers=this.data[0].map(t=>t.toUpperCase())}getNonHeaders(){return this.data.slice(1,this.data.length)}indexOfCol(t){let e=-1;Array.isArray(t)||(t=[t]),t=t.map(t=>t.toUpperCase());for(let s=0;s<this.headers.length&&-1===e;s++)-1!==t.indexOf(this.headers[s])&&(e=s);return e}}},function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s){this.startId=parseInt(t),this.endId=parseInt(e),this.dataSource=s,this.valid=!0,this.idPath=[],this.nodePath=[],this.pathLength=0,this.loadPath(),this.decodeIds(),this.images=this.getImages(),this.imgInd=-1}decodeIds(){this.nodePath=[];for(let t=0;t<this.idPath.length;t++)this.nodePath[t]=this.dataSource.getNodeDB().getNode(this.idPath[t])}loadPath(){if(this.startId===this.endId)return this.idPath=[this.startId],void(this.pathLength=0);let t=this.dataSource.getNodeDB(),e=t.getAll(),s=[],n={},o={};for(let t=0;t<e.length;t++)s[t]=e[t],n[e[t].id]=1/0,o[e[t].id]=void 0;function i(){let t=0;for(let e=0;e<s.length;e++)n[s[e].id]<n[s[t].id]&&(t=e);return t}for(n[this.startId]=0;s.length>0;){let e=i(),a=s[e];s.splice(e,1);for(let e=0;e<a.adj.length;e++)if(s.includes(a.adj[e])){let s=n[a.id]+a.distanceFrom(a.adj[e]);(n[a.adj[e].id]===1/0||s<a.adj[e].distanceFrom(t.getNode(this.startId)))&&(n[a.adj[e].id]=s,o[a.adj[e].id]=a.id)}}let a=[],r=this.endId;for(;void 0!==o[r];)a.push(r),r=o[r];-1!==t.getNode(this.startId).adjIds.indexOf(a[a.length-1])&&a.push(this.startId),a=a.reverse(),this.idPath=a,this.pathLength=n[this.endId],this.startId===this.idPath[0]&&this.endId===this.idPath[this.idPath.length-1]||this.invalidate(),(this.startId<0||this.endId<0)&&this.invalidate()}invalidate(){if(this.valid){this.valid=!1;try{throw console.log("Invalid path detected: "),console.log(this),new Error}catch(t){console.log(t.stack)}}}getURL(){return window.location.href.split("?")[0]+"?startID="+this.idPath[0]+"&endID="+this.idPath[this.idPath.length-1]}draw(t){t.clear(),t.setColor("red");let e=this.nodePath;e[0].draw(t);for(let s=1;s<e.length;s++)t.line(e[s-1].x,e[s-1].y,e[s].x,e[s].y),e[s].draw(t)}getImages(){let t=[],e=0;for(;e+1<this.idPath.length;){e++;let s=this.nodePath[e-1],n=this.nodePath[e];if(s.getHasImage(n.id)){let e=s.getImageTo(n.id);-1===t.indexOf(e)&&t.push(e)}}return t}nextImage(){return this.imgInd+1<this.images.length?this.imgInd++:this.imgInd=0,0!==this.images.length?this.images[this.imgInd]:" "}}},function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this.box=document.getElementById(t),this.resultElement=document.getElementById(e),null===this.box&&(this.box=document.createElement("input"),this.box.setAttribute("type","text"),this.box.setAttribute("id",t),document.body.appendChild(this.box)),null===this.resultElement&&(this.resultElement=document.createElement("div"),this.resultElement.setAttribute("id",e),document.body.appendChild(this.resultElement)),this.options=["your result will appear here!"],this.resultElement.innerHTML="your result will appear here!",this.box.oninput=this.updateResult.bind(this)}addOptions(t){let e=this;Array.isArray(t)||(t=[t]),t.forEach(t=>{t&&e.options.push(t.toString().toUpperCase())})}updateResult(){this.resultElement.innerHTML=function(t,e){let s,n=t.trim().toUpperCase(),i=[],a=0,r=t.length,l=e[0];for(let t=0;t<e.length;t++)i.push(e[t].trim().toUpperCase()),(s=o(n,i[t])).matches>a?(a=s.matches,r=s.spaces,l=e[t]):s.matches===a&&s.spaces<r&&(a=s.matches,r=s.spaces,l=e[t]);return l}(this.box.value,this.options)}isValid(){return this.options.indexOf(this.resultElement.innerHTML.toUpperCase())>0}setInput(t){this.box.value=t,this.box.oninput()}getResult(){return this.resultElement.innerHTML}}function o(t,e){t=t.toUpperCase(),e=e.toUpperCase();let s,n,o,i=0,a=0;for(let r=0;r<t.length-i;r++){n=0,o=0,s=0;for(let i=0;i<e.length&&r+n<t.length;i++)t[r+n]===e[i]&&(o+=++n>1?i-s-1:i,s=i);n>i&&(i=n,a=o)}return{matches:i,spaces:a}}},function(t,e,s){"use strict";s.d(e,"b",function(){return n}),s.d(e,"a",function(){return o}),s.d(e,"c",function(){return i});const n="https://drive.google.com/uc?id=1Lt58PPBmimpY8hIlCJgg4qvF8CLt_mis",o="https://docs.google.com/spreadsheets/d/e/2PACX-1vREUvLP1uMDKADze2uCHx6jN4voxvO41g-gZ5pEDK_vJ0M9LA7UmfRgqJeX_NRDZsMMC_lOs2A0OKtm/pub?gid=57491238&single=true&output=csv",i="https://docs.google.com/spreadsheets/d/e/2PACX-1vSuRqzSZ2LyamtAz7Gs88JkOiBmyIx8ND6kqRhxbunGVPBw4Wqrc1yYgfjFeC6m_Dx0sbXTE4Q5k3uQ/pub?gid=0&single=true&output=csv"},function(t,e,s){"use strict";s.d(e,"a",function(){return i}),s.d(e,"b",function(){return r});var n=s(0);const o={contents:[],add(t){this.contents.push(t)},displayAll(){for(let t=0;t<this.contents.length;t++)console.log(this.contents[t])}};function i(t,e){let s=new XMLHttpRequest;s.onreadystatechange=function(){4===s.readyState&&200===s.status&&(o.add("Response from "+t+":"),o.add(s.responseText),e(s.responseText))},s.onerror=function(t){console.log(t),e("")},s.open("GET",t,!0),s.setRequestHeader("Cache-Control","max-age=0"),s.send(null)}function a(t,e){let s=new Map,n=0,o=!Array.isArray(e)||1===e.length;function a(i){return function(a){s.set(i,a),++n===t.length&&function(){if(o)e[0](s);else{let t=Array.from(s.values());for(let s=0;s<t.length&&s<e.length;s++)e[s](t[s])}}()}}Array.isArray(e)||(e=[e]);for(let e=0;e<t.length;e++)s.set(t[e],"No response from URL "+t[e]),i(t[e],a(t[e]))}function r(t,e,s={}){i(t,t=>{let o=Object(n.b)(t),i=s.hasOwnProperty("ignore")?s.ignore:[],r=new Map;for(let t=1;t<o.length;t++)""!==o[t][1]&&-1===i.indexOf(o[t][0])&&r.set(o[t][1],o[t][0]);a(Array.from(r.keys()),function(t){let s=new Map;t.forEach((t,e)=>{s.set(r.get(e),t)}),e(s)})})}},function(t,e,s){"use strict";s.d(e,"a",function(){return o});var n=s(1);class o{constructor(){this.canvas=void 0,this.start=void 0,this.end=void 0,this.pathButton=void 0,this.currentPath=void 0,this.nodeDatabase=void 0,this.classDatabase=void 0}setCanvas(t){this.canvas=t}getCanvas(){return this.canvas}setInput(t,e){this.start=t,this.end=e,t.addOptions(this.getNodeDB().getAllNames()),e.addOptions(this.getNodeDB().getAllNames())}setClassFinder(t,e,s,n,o,i){let a=this.getClassDB(),r=this,l=document.getElementById(n),d=document.getElementById(o),h=document.getElementById(i);null===l&&((l=document.createElement("button")).setAttribute("id",n),l.innerHTML="Find class number",document.body.appendChild(l)),null===d&&((d=document.createElement("select")).setAttribute("id",o),document.body.appendChild(d)),null===h&&((h=document.createElement("button")).setAttribute("id",i),h.innerHTML="Clear input",document.body.appendChild(h)),t.addOptions(a.getAllClassNames()),e.addOptions(a.getAllInstructors()),s.addOptions(a.getAllMeetingTimes()),l.onclick=function(){function n(t){return parseInt(t)}let o,i=[r.getClassDB().getNumbersByName(t.getResult()).map(n),r.getClassDB().getNumbersByInstructor(e.getResult()).map(n),r.getClassDB().getNumbersByTime(s.getResult()).map(n)],a=[],l=["class not found"];for(i.forEach(t=>{t.length>0&&a.push(t)}),0===a.length?l=["class not found"]:1===a.length?l=a[0]:a[0].forEach(t=>{l=[];let e=!0;for(let s=1;s<a.length&&e;s++)e=-1!==a[s].indexOf(t);e&&l.push(t)});d.length>0;)d.remove(d.length-1);l.forEach(t=>{(o=document.createElement("option")).text=t,d.add(o)}),d.onchange()},h.onclick=function(){t.setInput(""),e.setInput(""),s.setInput("")},d.onchange=function(){t.setInput(a.select(a.NAME,a.NUMBER,d.value)[0]),e.setInput(a.select(a.INSTRUCTOR,a.NUMBER,d.value)[0]),s.setInput(a.select(a.MEETING_TIME,a.NUMBER,d.value)[0])}}setPathButton(t){this.pathButton=document.getElementById(t),null===this.pathButton&&(this.pathButton=document.createElement("button"),this.pathButton.setAttribute("id",t),this.pathButton.innerHTML="Draw Path",document.body.appendChild(this.pathButton));let e=this;this.pathButton.onclick=function(){e.start.isValid()&&e.end.isValid()&&e.updatePath(e.start.getResult(),e.end.getResult())}}setPath(t){if(t.valid){this.currentPath=t;try{t.draw(this.canvas)}catch(t){console.log("Main's canvas is not defined yet"),console.log(t.stack)}}}getPath(){return this.currentPath}updatePath(t,e){try{let s=this.getNodeDB().getIdByString(t),o=this.getNodeDB().getIdByString(e);if(null==s||null==o)throw new Error("Invalid start and end points: "+t+" "+e);{let t=new n.a(s,o,this);if(!t.valid)throw new Error("Invalid path: "+t.idPath);this.setPath(t)}}catch(t){console.log(t.stack)}}testAllPaths(){let t=this,e=t.getNodeDB(),s=[];function o(s,o){try{let i=e.getIdByString(s),a=e.getIdByString(o);if(null!=i&&null!=a){let e=new n.a(i,a,t);if(!e.valid)throw new Error("Invalid Path: "+e.idPath)}}catch(t){console.log(t.stack)}}s=s.concat(e.getAllNames()),alert("Please wait while I process "+s.length*s.length+" paths...");for(let t=0;t<s.length;t++)for(let e=0;e<s.length;e++)o(s[t],s[e]);alert("Done.")}setNodeDB(t){this.nodeDatabase=t}getNodeDB(){return this.nodeDatabase}setClassDB(t){this.classDatabase=t}getClassDB(){return this.classDatabase}}},function(t,e,s){"use strict";s.r(e);class n{constructor(){this.draw=void 0,this.scalingElement=void 0,this.destWidth=0,this.destHeight=0,this.sourceMinX=0,this.sourceMinY=0,this.sourceMaxX=0,this.sourceMaxY=0,this.color=void 0}link(t,e){try{this.draw=t,this.scalingElement=e,this.resize()}catch(t){console.log(t.stack)}}setColor(t){this.color=t}clear(){let t=this.draw.children();for(let e=t.length-1;e>=0;e--)"rect"!==t[e].type&&"line"!==t[e].type&&"text"!==t[e].type||t[e].remove()}rect(t,e,s,n){return this.draw.rect(s,n).attr({fill:this.color}).move(this.x(t),this.y(e))}text(t,e,s){return this.draw.text(t.toString()).move(this.x(e)-10,this.y(s)-20).attr({fill:this.color})}line(t,e,s,n){return this.draw.line(this.x(t),this.y(e),this.x(s),this.y(n)).stroke({color:this.color,width:3})}setCorners(t,e,s,n){this.sourceMinX=t,this.sourceMinY=e,this.sourceMaxX=s,this.sourceMaxY=n,this.calcSize()}resize(){this.destWidth=this.scalingElement.width.baseVal.value,this.destHeight=this.scalingElement.height.baseVal.value}calcSize(){this.mapWidth=this.sourceMaxX-this.sourceMinX,this.mapHeight=this.sourceMaxY-this.sourceMinY}x(t){return(t-this.sourceMinX)/this.mapWidth*this.destWidth}y(t){return(t-this.sourceMinY)/this.mapHeight*this.destHeight}}var o=s(1),i=s(5),a=s(2),r=s(4),l=s(0),d=s(3);class h{constructor(t,e,s){try{if(this.id=parseInt(t),isNaN(this.id))throw new TypeError("Node id must be an integer")}catch(t){console.log(t.stack)}try{if(this.x=parseFloat(e),this.y=parseFloat(s),isNaN(this.x)||isNaN(this.y))throw new TypeError("X and Y must be numbers")}catch(t){console.log(t)}this.adjIds=[],this.connectionImages={}}loadAdj(t){let e;this.adj=[];for(let s=0;s<this.adjIds.length;s++)(e=t.getNode(this.adjIds[s]))&&this.adj.push(e)}distanceFrom(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}addAdjId(t){this.adjIds.push(t)}setConnectionImage(t,e){this.connectionImages[t]=e}getHasImage(t){return this.connectionImages.hasOwnProperty(t)}getImageTo(t){return this.connectionImages[t]}draw(t){t.setColor("red"),t.rect(this.x,this.y,5,5)}drawId(t){t.setColor("red"),t.text(this.id,this.x,this.y)}drawLinks(t){t.setColor("red"),this.drawId(t);for(let e=0;e<this.adj.length;e++)this.adj[e].draw(t),t.line(this.x,this.y,this.adj[e].x,this.adj[e].y)}generateDiv(t){let e=this,s=t.getCanvas();e.drawId(s),s.rect(this.x,this.y,10,10).mouseover(function(){e.draw(s),e.drawLinks(s)}).mouseout(function(){s.clear();let e=t.getPath();void 0!==e&&e.draw(s),t.getNodeDB().generateDivs(t)}).click(function(){console.log(e)})}}class c{constructor(){this.nodes=new Map,this.stuffToNodeId=new Map}parseNodeData(t){let e,s,n,o,i=Object(l.b)(t),a=[];for(let t=1;t<i.length;t++)e=i[t],s=parseInt(e[0]),n=parseFloat(e[1]),o=parseFloat(e[2]),isNaN(s)||isNaN(n)||isNaN(o)||this.nodes.has(s)?a.push("An error occured for the line "+e.join()):this.nodes.set(s,new h(s,n,o));a.length>0&&(console.log("Something went wrong with parsing the node data:"),a.forEach(t=>console.log("--"+t)))}parseNameToId(t){let e,s,n=this;Object(l.b)(t).forEach(t=>{try{e=t[0].toString().toUpperCase(),s=parseInt(t[1]),isNaN(s)?console.log("Oops! Node ID of "+t[1]):n.stuffToNodeId.set(e,s)}catch(e){console.log("Invalid row: "+t),console.log(e.message)}})}parseConnData(t){let e,s=Object(l.b)(t);for(let t=1;t<s.length;t++){e=s[t];try{this.getNode(parseInt(e[0])).addAdjId(parseInt(e[1]))}catch(t){console.log("Node not found: "+parseInt(e[1])),console.log(t.stack)}}let n=this;this.getAll().forEach(t=>t.loadAdj(n)),this.logOneWayNodes()}parseImageResponse(t){let e=t.getNonHeaders(),s=t.indexOfCol(["From","node1","n1"]),n=t.indexOfCol(["to","node2","n2"]),o=t.indexOfCol(["image","img","photo","url"]);for(let t=1;t<e.length;t++)if(""!==e[t][s]&&""!==e[t][n]&&""!==e[t][o])try{this.getNode(parseInt(e[t][s])).setConnectionImage(e[t][n],e[t][o])}catch(t){console.log("An error occured while parsing image data:"),console.log(t.stack)}}parseClassResponse(t){let e,s,n=[],o=t.getNonHeaders(),i=t.indexOfCol(["CLASS NUMBER","CLASS"]),a=t.indexOfCol(["BUILDING"]),r=t.indexOfCol(["ROOM"]);for(let t=1;t<o.length;t++)e=o[t],null==(s=this.getIdByString((e[a]+" "+e[r]).toUpperCase()))?n.includes(e[a]+" "+e[r])||n.push(e[a]+" "+e[r]):isNaN(parseInt(s))||this.stuffToNodeId.set(e[i].toString().toUpperCase(),parseInt(s));0!==n.length&&(console.log("Could not find a node connected to rooms..."),n.forEach(t=>console.log("-"+t)),console.log("Check the current room to node file in the google drive to see if these rooms are missing nodes."))}getNode(t){let e=null;try{if(!((e=this.nodes.get(parseInt(t)))instanceof h))throw Error("Node with id of "+t+" does not exist")}catch(t){console.log(t.stack)}return e}getIdByString(t){let e=this.stuffToNodeId.get(t.toString().toUpperCase());return void 0===e&&console.log("Couldn't find node identified by "+t),e}getAllNames(){return Array.from(this.stuffToNodeId.keys())}getAll(){return Array.from(this.nodes.values())}prettyPrintStuffToId(){let t=0;this.getAllNames().forEach(e=>{e.length>t&&(t=e.length)});let e,s=0,n=" ";this.stuffToNodeId.forEach((o,i)=>{for(s=t-i.length,n=" ",e=0;e<s;e++)n+=" ";console.log(i+n+o)})}logOneWayNodes(){let t=this.getAll();for(let e=0;e<t.length;e++){let s=t[e];for(let t=0;t<s.adj.length&&s.id>=0;t++)s.adj[t].adjIds.includes(s.id)||(s.adj[t].adjIds.push(s.id),s.adj[t].loadAdj(this))}}countConnections(){let t=0,e=this.getAll();for(let s=0;s<e.length;s++)t+=e[s].adj.length;console.log("Total connections between nodes: "+t)}generateDivs(t){this.getAll().forEach(e=>e.generateDiv(t))}drawAll(t){this.getAll().forEach(e=>{e.draw(t),e.drawLinks(t)})}}let u=new i.a,g=SVG("wrapper").size(1e3,1e3).panZoom();g.image(d.b).loaded(()=>{console.time("Time to load");let t,e=new c,s=new n,i=new a.a("start box","start hint"),h=new a.a("end box","end hint");u.setNodeDB(e),s.link(g,document.getElementById("wrapper").getElementsByTagName("svg")[0].getElementsByTagName("image")[0]),s.resize(),u.setCanvas(s),Object(r.a)(d.c,console.log),Object(r.b)(d.c,n=>{e.parseNodeData(n.get("Node coordinates")),e.parseConnData(n.get("Node connections")),s.setCorners(e.getNode(-1).x,e.getNode(-1).y,e.getNode(-2).x,e.getNode(-2).y),e.parseNameToId(n.get("buildings")),e.parseNameToId(n.get("rooms")),e.parseImageResponse(new l.a(n.get("images"))),u.setInput(i,h),u.setPathButton("button"),t=function(){const t=window.location.href,e=[14,96];if(t.indexOf("?")>-1){let s=t.split("?")[1].split("&");for(let t=0;t<s.length;t++){let n=s[t].split("=");console.log("Pair: "+n),n[0].toUpperCase().includes("START")?e[0]=n[1]:n[0].toUpperCase().includes("END")&&(e[1]=n[1]),e[n[0]]=parseFloat(n[1])}}return e}(),u.setPath(new o.a(t[0],t[1],u)),u.getPath().draw(u.getCanvas()),console.timeEnd("Time to load")},{ignore:["map image","classes","class to room"]})}),window.addEventListener("resize",function(){u.getCanvas().resize(),void 0!==u.getPath()&&u.getPath().draw(u.getCanvas())})}]);